"use strict";
require('traceur-source-maps').install(require('traceur'));
var Readable = require('stream').Readable;
var Writable = require('stream').Writable;
var Transform = require('stream').Transform;
var words = 'abcdefghijklmnopqrstuvwxyz'.split('');
function CapsLockStream() {
  var $__0 = this;
  this.__proto__ = Transform.call(this);
  this._transform = (function(data, encoding, done) {
    var $__1,
        $__2;
    {
      try {
        throw undefined;
      } catch ($i) {
        {
          $i = 0;
          for (; $i < data.length; $i++) {
            try {
              throw undefined;
            } catch (i) {
              {
                i = $i;
                try {
                  if (data[$traceurRuntime.toProperty(i)] >= 97 && data[$traceurRuntime.toProperty(i)] <= 122) {
                    ($__1 = data[$traceurRuntime.toProperty(i)], $__2 = $__1 & ~32, $traceurRuntime.setProperty(data, i, $__2), $__2);
                  }
                } finally {
                  $i = i;
                }
              }
            }
          }
        }
      }
    }
    $__0.push(data);
    throw new Error('fail');
    done();
  });
}
function RandomLetterStream(n) {
  var $__0 = this;
  var index = 0;
  this.__proto__ = Readable.call(this);
  this._read = (function(size) {
    if (n-- === 0)
      return $__0.push(null);
    $__0.push(words[$traceurRuntime.toProperty(index++)]);
  });
}
function ConsoleLogTransformStream() {
  var $__0 = this;
  this.__proto__ = Writable.call(this);
  this._transform = (function(chunk, encoding, done) {
    console.log(String(chunk));
    $__0.push(chunk);
    done();
  });
}
function ConsoleLogStream() {
  this.__proto__ = Writable.call(this);
  this._write = (function(chunk, encoding, done) {
    console.log(String(chunk));
    done();
  });
}
function SplitterStream() {
  this.__proto__ = Writable.call(this);
  this._write = (function(chunk, encoding, done) {
    process.stdout.write(chunk);
    process.stderr.write(chunk);
    done();
  });
}
var trycatch = require('trycatch');
require('http').createServer((function(req, res) {
  trycatch((function() {
    (new RandomLetterStream).length;
    req.pipe(new CapsLockStream).pipe(res);
  }), (function(err) {
    return res.end(err.stack);
  }));
})).listen(8000);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0cmVhbXNfdHJhbnNmb3Jtc2VydmVyLmVzNi5qcyIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8xIiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFNLEFBQUMsQ0FBQyxxQkFBb0IsQ0FBQyxRQUFRLEFBQUMsQ0FBQyxPQUFNLEFBQUMsQ0FBQyxTQUFRLENBQUMsQ0FBQyxDQUFDO0VBQUssQ0FBQSxRQUFPLEVBQUksQ0FBQSxPQUFNLEFBQUMsQ0FBQyxRQUFPLENBQUMsU0FBUztFQUMvRixDQUFBLFFBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFFBQU8sQ0FBQyxTQUFTO0VBQ3BDLENBQUEsU0FBUSxFQUFJLENBQUEsT0FBTSxBQUFDLENBQUMsUUFBTyxDQUFDLFVBQVU7RUFDdEMsQ0FBQSxLQUFJLEVBQUksQ0FBQSw0QkFBMkIsTUFBTSxBQUFDLENBQUMsRUFBQyxDQUFDO0FBRWpELE9BQVMsZUFBYSxDQUFDLEFBQUM7O0FBQ3ZCLEtBQUcsVUFBVSxFQUFJLENBQUEsU0FBUSxLQUFLLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQTtBQUNwQyxLQUFHLFdBQVcsSUFBSSxTQUFDLElBQUcsQ0FBRyxDQUFBLFFBQU8sQ0FBRyxDQUFBLElBQUc7Ozs7Ozs7O2FBQ3pCLEVBQUE7ZUFBRyxLQUFJLENBQUEsSUFBRyxPQUFPLENBQUcsS0FBRTs7Ozs7O2tCQUFHO0FBQ3BDLHFCQUFJLElBQUcsQ0NUUSxlQUFjLFdBQVcsQUFBQyxDRFNoQyxDQUFBLENDVGtELENBQUMsR0RTN0MsR0FBQyxDQUFBLEVBQUssQ0FBQSxJQUFHLENDVFQsZUFBYyxXQUFXLEFBQUMsQ0RTZixDQUFBLENDVGlDLENBQUMsR0RTNUIsSUFBRSxDQUFHO0FBQ3BDLDBCQ1ZKLENEVUksSUFBRyxDQ1ZXLGVBQWMsV0FBVyxBQUFDLENEVW5DLENBQUEsQ0NWcUQsQ0FBQyxRRFUzRCxP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QUFXZCIsImZpbGUiOiJzdHJlYW1zX3RyYW5zZm9ybXNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ3RyYWNldXItc291cmNlLW1hcHMnKS5pbnN0YWxsKHJlcXVpcmUoJ3RyYWNldXInKSk7bGV0IFJlYWRhYmxlID0gcmVxdWlyZSgnc3RyZWFtJykuUmVhZGFibGVcbmxldCBXcml0YWJsZSA9IHJlcXVpcmUoJ3N0cmVhbScpLldyaXRhYmxlXG5sZXQgVHJhbnNmb3JtID0gcmVxdWlyZSgnc3RyZWFtJykuVHJhbnNmb3JtXG5sZXQgd29yZHMgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonLnNwbGl0KCcnKVxuXG5mdW5jdGlvbiBDYXBzTG9ja1N0cmVhbSgpIHtcblx0dGhpcy5fX3Byb3RvX18gPSBUcmFuc2Zvcm0uY2FsbCh0aGlzKVxuXHR0aGlzLl90cmFuc2Zvcm0gPSAoZGF0YSwgZW5jb2RpbmcsIGRvbmUpID0+IHtcblx0XHRmb3IgKGxldCBpID0wOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGRhdGFbaV0gPj0gOTcgJiYgZGF0YVtpXSA8PSAxMjIpIHtcblx0XHRcdFx0ZGF0YVtpXSAmPSB+MzJcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5wdXNoKGRhdGEpXG5cdFx0dGhyb3cgbmV3IEVycm9yKCdmYWlsJylcblx0XHRkb25lKClcblx0fVxufVxuXG5mdW5jdGlvbiBSYW5kb21MZXR0ZXJTdHJlYW0obikge1xuXHRsZXQgaW5kZXggPSAwXG5cdHRoaXMuX19wcm90b19fID0gUmVhZGFibGUuY2FsbCh0aGlzKVxuXHR0aGlzLl9yZWFkID0gKHNpemUpID0+IHtcblx0XHRpZiAobi0tID09PSAwKSByZXR1cm4gdGhpcy5wdXNoKG51bGwpXG5cdFx0dGhpcy5wdXNoKHdvcmRzW2luZGV4KytdKVxuXHR9XG59XG5cbmZ1bmN0aW9uIENvbnNvbGVMb2dUcmFuc2Zvcm1TdHJlYW0oKSB7XG5cdHRoaXMuX19wcm90b19fID0gV3JpdGFibGUuY2FsbCh0aGlzKVxuXHR0aGlzLl90cmFuc2Zvcm0gPSAoY2h1bmssIGVuY29kaW5nLCBkb25lKSA9PiB7XG5cdFx0Y29uc29sZS5sb2coU3RyaW5nKGNodW5rKSlcblx0XHR0aGlzLnB1c2goY2h1bmspXG5cdFx0ZG9uZSgpXG5cdH1cbn1cblxuZnVuY3Rpb24gQ29uc29sZUxvZ1N0cmVhbSgpIHtcblx0dGhpcy5fX3Byb3RvX18gPSBXcml0YWJsZS5jYWxsKHRoaXMpXG5cdHRoaXMuX3dyaXRlID0gKGNodW5rLCBlbmNvZGluZywgZG9uZSkgPT4ge1xuXHRcdGNvbnNvbGUubG9nKFN0cmluZyhjaHVuaykpXG5cdFx0ZG9uZSgpXG5cdH1cbn1cblxuZnVuY3Rpb24gU3BsaXR0ZXJTdHJlYW0oKSB7XG5cdHRoaXMuX19wcm90b19fID0gV3JpdGFibGUuY2FsbCh0aGlzKVxuXHR0aGlzLl93cml0ZSA9IChjaHVuaywgZW5jb2RpbmcsIGRvbmUpID0+IHtcblx0XHRwcm9jZXNzLnN0ZG91dC53cml0ZShjaHVuaylcblx0XHRwcm9jZXNzLnN0ZGVyci53cml0ZShjaHVuaylcblx0XHRkb25lKClcblx0fVxufVxuXG5sZXQgdHJ5Y2F0Y2ggPSByZXF1aXJlKCd0cnljYXRjaCcpXG5yZXF1aXJlKCdodHRwJykuY3JlYXRlU2VydmVyKChyZXEsIHJlcykgPT4ge1xuXHR0cnljYXRjaCgoKSA9PiB7XG5cdFx0KG5ldyBSYW5kb21MZXR0ZXJTdHJlYW0pLmxlbmd0aFxuXHRcdHJlcS5waXBlKG5ldyBDYXBzTG9ja1N0cmVhbSkucGlwZShyZXMpXG5cdH0sIGVyciA9PiByZXMuZW5kKGVyci5zdGFjaykpXG59KS5saXN0ZW4oODAwMClcblxuXG5cblxuXG5cblxuXG5cblxuIiwiJF9fcGxhY2Vob2xkZXJfXzBbJHRyYWNldXJSdW50aW1lLnRvUHJvcGVydHkoJF9fcGxhY2Vob2xkZXJfXzEpXSIsIiR0cmFjZXVyUnVudGltZS5zZXRQcm9wZXJ0eSgkX19wbGFjZWhvbGRlcl9fMCxcbiAgICAgICAgICAkX19wbGFjZWhvbGRlcl9fMSwgJF9fcGxhY2Vob2xkZXJfXzIpIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9