"use strict";
require('traceur-source-maps').install(require('traceur'));
var express = require('express'),
    app = express(),
    trycatch = require('trycatch').configure({'long-stack-traces': true});
app.use(trycatchMiddleware);
app.get('/', (function(req, res) {
  process.nextTick((function() {
    throw new Error('fail');
  }));
}));
app.listen(8000);
function requestErrorHandler(req, res, err) {
  res.writeHead(500);
  res.end(err.stack);
}
function trycatchMiddleware(req, res, next) {
  trycatch(next, requestErrorHandler.bind(null, req, res));
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cHJlc3NfdHJ5Y2F0Y2htaWRkbGV3YXJlLmVzNi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQU0sQUFBQyxDQUFDLHFCQUFvQixDQUFDLFFBQVEsQUFBQyxDQUFDLE9BQU0sQUFBQyxDQUFDLFNBQVEsQ0FBQyxDQUFDLENBQUM7RUFBSyxDQUFBLE9BQU0sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFNBQVEsQ0FBQztBQUN2RixNQUFFLEVBQUksQ0FBQSxPQUFNLEFBQUMsRUFBQztBQUNkLFdBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFVBQVMsQ0FBQyxVQUFVLEFBQUMsQ0FBQyxDQUFDLG1CQUFrQixDQUFFLEtBQUcsQ0FBQyxDQUFDO0FBRXRFLEVBQUUsSUFBSSxBQUFDLENBQUMsa0JBQWlCLENBQUMsQ0FBQTtBQUMxQixFQUFFLElBQUksQUFBQyxDQUFDLEdBQUUsR0FBRyxTQUFDLEdBQUUsQ0FBRyxDQUFBLEdBQUU7QUFDcEIsUUFBTSxTQUFTLEFBQUMsRUFBQyxTQUFBLEFBQUMsQ0FBSztBQUN0QixRQUFNLElBQUksTUFBSSxBQUFDLENBQUMsTUFBSyxDQUFDLENBQUE7RUFDdkIsRUFBQyxDQUFBO0FBQ0YsRUFBQyxDQUFBO0FBRUQsRUFBRSxPQUFPLEFBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBQTtBQUVmLE9BQVMsb0JBQWtCLENBQUUsR0FBRSxDQUFHLENBQUEsR0FBRSxDQUFHLENBQUEsR0FBRSxDQUFHO0FBQzNDLElBQUUsVUFBVSxBQUFDLENBQUMsR0FBRSxDQUFDLENBQUE7QUFDakIsSUFBRSxJQUFJLEFBQUMsQ0FBQyxHQUFFLE1BQU0sQ0FBQyxDQUFBO0FBQ2xCO0FBQUEsQUFFQSxPQUFTLG1CQUFpQixDQUFFLEdBQUUsQ0FBRyxDQUFBLEdBQUUsQ0FBRyxDQUFBLElBQUcsQ0FBRztBQUMzQyxTQUFPLEFBQUMsQ0FBQyxJQUFHLENBQUcsQ0FBQSxtQkFBa0IsS0FBSyxBQUFDLENBQUMsSUFBRyxDQUFHLElBQUUsQ0FBRyxJQUFFLENBQUMsQ0FBQyxDQUFBO0FBQ3hEO0FBQUEiLCJmaWxlIjoiZXhwcmVzc190cnljYXRjaG1pZGRsZXdhcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCd0cmFjZXVyLXNvdXJjZS1tYXBzJykuaW5zdGFsbChyZXF1aXJlKCd0cmFjZXVyJykpO2xldCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG5cdCwgYXBwID0gZXhwcmVzcygpXG5cdCwgdHJ5Y2F0Y2ggPSByZXF1aXJlKCd0cnljYXRjaCcpLmNvbmZpZ3VyZSh7J2xvbmctc3RhY2stdHJhY2VzJzp0cnVlfSlcblxuYXBwLnVzZSh0cnljYXRjaE1pZGRsZXdhcmUpXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG5cdHByb2Nlc3MubmV4dFRpY2soKCkgPT4ge1xuXHRcdHRocm93IG5ldyBFcnJvcignZmFpbCcpXG5cdH0pXG59KVxuXG5hcHAubGlzdGVuKDgwMDApXG5cbmZ1bmN0aW9uIHJlcXVlc3RFcnJvckhhbmRsZXIocmVxLCByZXMsIGVycikge1xuXHRyZXMud3JpdGVIZWFkKDUwMClcblx0cmVzLmVuZChlcnIuc3RhY2spXG59XG5cbmZ1bmN0aW9uIHRyeWNhdGNoTWlkZGxld2FyZShyZXEsIHJlcywgbmV4dCkge1xuXHR0cnljYXRjaChuZXh0LCByZXF1ZXN0RXJyb3JIYW5kbGVyLmJpbmQobnVsbCwgcmVxLCByZXMpKVxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==